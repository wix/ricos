<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.65">
<title data-react-helmet="true">rich-content-preview | Ricos</title><meta data-react-helmet="true" name="docsearch:version" content="current,latest"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="rich-content-preview | Ricos"><meta data-react-helmet="true" name="description" content="Introduction"><meta data-react-helmet="true" property="og:description" content="Introduction"><meta data-react-helmet="true" property="og:url" content="https://wix-incubator.github.io//rich-content/docs/rcp_api/RichContentPreviewAPI"><link data-react-helmet="true" rel="shortcut icon" href="/rich-content/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://wix-incubator.github.io//rich-content/docs/rcp_api/RichContentPreviewAPI"><link rel="stylesheet" href="/rich-content/styles.8b9ff3a4.css">
<link rel="stylesheet" href="/rich-content/main.c88738b4.css">
<link rel="preload" href="/rich-content/styles.ae93a173.js" as="script">
<link rel="preload" href="/rich-content/runtime~main.35869582.js" as="script">
<link rel="preload" href="/rich-content/main.1b9019dc.js" as="script">
<link rel="preload" href="/rich-content/5.faeed656.js" as="script">
<link rel="preload" href="/rich-content/7.cae4dac7.js" as="script">
<link rel="preload" href="/rich-content/80.92db8b89.js" as="script">
<link rel="preload" href="/rich-content/82.498dd18d.js" as="script">
<link rel="preload" href="/rich-content/935f2afb.da9c5928.js" as="script">
<link rel="preload" href="/rich-content/17896441.2946f2e6.js" as="script">
<link rel="preload" href="/rich-content/3c41c506.bfb3648c.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top navbarHideable_3046"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/rich-content/"><img class="navbar__logo" src="/rich-content/img/rce.svg" alt="Ricos Logo"><strong class="navbar__title">Ricos</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/rich-content/docs/ricos/quick-start">Getting Started</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/rich-content/docs/ricos/ricos-api">API</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/rich-content/docs/plugin-development-guidelines/general">Developer Guidelines</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/wix-incubator/rich-content" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/rich-content/"><img class="navbar__logo" src="/rich-content/img/rce.svg" alt="Ricos Logo"><strong class="navbar__title">Ricos</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/rich-content/docs/ricos/quick-start">Getting Started</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/rich-content/docs/ricos/ricos-api">API</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/rich-content/docs/plugin-development-guidelines/general">Developer Guidelines</a></li><li class="menu__list-item"><a href="https://github.com/wix-incubator/rich-content" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC sidebarWithHideableNavbar_2IoJ"><a tabindex="-1" class="sidebarLogo_Snse" href="/rich-content/"><img src="/rich-content/img/rce.svg" alt="Ricos Logo"><strong>Ricos</strong></a><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">API Reference</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Ricos</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rich-content/docs/ricos/ricos-api">Ricos API</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Plugins</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rich-content/docs/plugins_api/PluginCustomization">Plugin Customization</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rich-content/docs/plugins_api/GiphyPlugin">Giphy Plugin</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rich-content/docs/plugins_api/HashtagPlugin">Hashtag Plugin</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rich-content/docs/plugins_api/VideoPlugin">Video Plugin</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rich-content/docs/plugins_api/MapPlugin">Map Plugin</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rich-content/docs/plugins_api/GalleryPlugin">Gallery Plugin</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rich-content/docs/plugins_api/ImagePlugin">Image Plugin</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rich-content/docs/plugins_api/DividerPlugin">Divider Plugin</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rich-content/docs/plugins_api/FileUploadPlugin">File Upload Plugin</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Rich Content Editor [legacy]</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rich-content/docs/rce_api/RichContentEditorAPI">RichContentEditor API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rich-content/docs/rce_api/ToolbarCustomization">Toolbar Customization</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rich-content/docs/rce_api/UiSettings">UI Settings</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rich-content/docs/rce_api/plugins_config">plugins and config</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rich-content/docs/rce_api/theme">Theme</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rich-content/docs/rce_api/helpers">helpers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rich-content/docs/rce_api/editorKey">editorKey</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rich-content/docs/rce_api/editorState_onChange">editorState and onChange</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rich-content/docs/rce_api/initialState">Initial State</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rich-content/docs/rce_api/isMobile">Mobile</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rich-content/docs/rce_api/anchorTarget_relValue">anchorTarget and relValue</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rich-content/docs/rce_api/draftjs">DraftJS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rich-content/docs/rce_api/a11y">Accessibility</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rich-content/docs/rce_api/onFocus_onBlur">onFocus and onBlur</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rich-content/docs/rce_api/textAlignment">Text Alignment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rich-content/docs/rce_api/locale_resource">Localization</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rich-content/docs/rce_api/seoMode">SEO Mode</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rich-content/docs/rce_api/onAtomicBlockFocus">onAtomicBlockFocus</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rich-content/docs/rce_api/onError">Error Handling</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rich-content/docs/rce_api/siteDomain">Site Domain</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Rich Content Viewer [legacy]</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rich-content/docs/rcv_api/initialState">Initial State</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rich-content/docs/rcv_api/typeMappers_config">typeMappers and config</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rich-content/docs/rcv_api/anchorTarget_relValue">anchorTarget and relValue</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rich-content/docs/rcv_api/helpers">helpers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rich-content/docs/rcv_api/locale_resource">Localization</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rich-content/docs/rcv_api/theme">Theme</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rich-content/docs/rcv_api/decorators_inlineStyleMappers">Decorators and Inline Style Mappers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rich-content/docs/rcv_api/seoMode">SEO Mode</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rich-content/docs/rcv_api/siteDomain">Site Domain</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rich-content/docs/rcv_api/onError">Error Handling</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rich-content/docs/rcv_api/fullscreen">Fullscreen</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rich-content/docs/rcv_api/isMobile">Mobile</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rich-content/docs/rcv_api/textDirection">Text Direction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rich-content/docs/rcv_api/addAnchors">Anchors</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Rich Content Preview [legacy]</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/rich-content/docs/rcp_api/RichContentPreviewAPI">Rich Content Preview</a></li></ul></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">rich-content-preview</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="introduction"></a>Introduction<a aria-hidden="true" tabindex="-1" class="hash-link" href="#introduction" title="Direct link to heading">#</a></h2><p>The Preview project comes to meet the requirement for a brief content preview; similar concept could be found in social media applications.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="architecture"></a>Architecture<a aria-hidden="true" tabindex="-1" class="hash-link" href="#architecture" title="Direct link to heading">#</a></h2><p>The core idea is to transform the content state and to display it within <code>RichContentViewer</code>. This transformation is a product of content state metadata and a set of rules defined by the consumer. This section discusses the main logic elements required to perform such a transformation.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="content-state-analyzer"></a>Content State Analyzer<a aria-hidden="true" tabindex="-1" class="hash-link" href="#content-state-analyzer" title="Direct link to heading">#</a></h3><p>The content state analyzer retrives content metadata containing the info regarding the data rather draft block and entity structure.</p><p>For example, the metadata could provide the following details:</p><ul><li>number of images and videos</li><li>length of text (in total and per block)</li><li>lists and code-blocks consisting of multiple sequential blocks are retrieved as a whole</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="content-state-builder"></a>Content State Builder<a aria-hidden="true" tabindex="-1" class="hash-link" href="#content-state-builder" title="Direct link to heading">#</a></h3><p>The content state builder provides a way to create a preview content state using the retrieved metadata. The preview state then can be rendered by <code>RichContentViewer</code>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="rule-engine"></a>Rule Engine<a aria-hidden="true" tabindex="-1" class="hash-link" href="#rule-engine" title="Direct link to heading">#</a></h3><p>The rule engine provides a way to define transformation rules and to apply them on a given <code>ContentState</code> according to the metadata.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="transformation-rule"></a>Transformation Rule<a aria-hidden="true" tabindex="-1" class="hash-link" href="#transformation-rule" title="Direct link to heading">#</a></h4><p>The transformation rule consists of condition and transform action.</p><p>Example:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function-variable function" style="color:#d73a49">if</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token parameter">metadata</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">images</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function-variable function" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">metadata</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> preview</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> preview</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">gallery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      items</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">images</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">slice</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> layout</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;grid&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> imageWidth</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">40</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="preview-interactions"></a>Preview Interactions<a aria-hidden="true" tabindex="-1" class="hash-link" href="#preview-interactions" title="Direct link to heading">#</a></h3><p>The preview interactons allow to expand hidden content. The <code>rich-content</code> repo introduces 3 predefined intertactions. The Content State Builder exposes methods to add interactions to the preview state, and the <code>RichContentViewer</code> renders the interacton components.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="read-more"></a>&#x27;Read More&#x27;<a aria-hidden="true" tabindex="-1" class="hash-link" href="#read-more" title="Direct link to heading">#</a></h4><p>The <code>Read More</code> interacton relies on <a href="https://github.com/xiaody/react-lines-ellipsis" target="_blank" rel="noopener noreferrer">react-lines-ellipsis</a> package. It displays required number of lines appended by an ellipsis. Although the package is capable to handle the HTML content, this feature is experimental. The current interacton is limited to work with plain text only. Mouse click expands the full post.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="see-full-post"></a>&#x27;See Full Post&#x27;<a aria-hidden="true" tabindex="-1" class="hash-link" href="#see-full-post" title="Direct link to heading">#</a></h4><p>The <code>See Full Post</code> displays a text label over an overlay. Mouse click expands the full post.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="image-counter"></a>Image Counter<a aria-hidden="true" tabindex="-1" class="hash-link" href="#image-counter" title="Direct link to heading">#</a></h4><p>The <code>Image Counter</code> renders hidden image counter. By default, the counter label placed above the last visible image element. The image elements are selected by <code>role=&#x27;img&#x27;</code> attribute.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="apis"></a>APIs<a aria-hidden="true" tabindex="-1" class="hash-link" href="#apis" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="getcontentstatemetadata"></a>getContentStateMetadata<a aria-hidden="true" tabindex="-1" class="hash-link" href="#getcontentstatemetadata" title="Direct link to heading">#</a></h3><p>The metadata is derived from ContentState and exposes its details:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> metadata </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getContentStateMetadata</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">contentState</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div><p>These details are categorized by content type rather actual ContentState structure.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="contentstatemetadataalltext"></a>ContentStateMetadata.allText<a aria-hidden="true" tabindex="-1" class="hash-link" href="#contentstatemetadataalltext" title="Direct link to heading">#</a></h4><p>The <code>ContentStateMetadata.allText</code> exposes all the textual content a string array.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="contentstatemetadataplain"></a>ContentStateMetadata.plain<a aria-hidden="true" tabindex="-1" class="hash-link" href="#contentstatemetadataplain" title="Direct link to heading">#</a></h4><p>The <code>ContentStateMetadata.plain</code> exposes the textual content extracted from the <code>unstyled</code> blocks as a string array.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="contentstatemetadataol"></a>ContentStateMetadata.ol<a aria-hidden="true" tabindex="-1" class="hash-link" href="#contentstatemetadataol" title="Direct link to heading">#</a></h4><p>The <code>ContentStateMetadata.ol</code> exposes the textual content extracted from the ordered list blocks as a string array.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="contentstatemetadataul"></a>ContentStateMetadata.ul<a aria-hidden="true" tabindex="-1" class="hash-link" href="#contentstatemetadataul" title="Direct link to heading">#</a></h4><p>The <code>ContentStateMetadata.ul</code> exposes the textual content extracted from the unordered list blocks as a string array.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="contentstatemetadataquotes"></a>ContentStateMetadata.quotes<a aria-hidden="true" tabindex="-1" class="hash-link" href="#contentstatemetadataquotes" title="Direct link to heading">#</a></h4><p>The <code>ContentStateMetadata.quotes</code> exposes the textual content extracted from the <code>blockquote</code> blocks as a string array.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="contentstatemetadatacode"></a>ContentStateMetadata.code<a aria-hidden="true" tabindex="-1" class="hash-link" href="#contentstatemetadatacode" title="Direct link to heading">#</a></h4><p>The <code>ContentStateMetadata.code</code> exposes the textual content extracted from the <code>code-block</code> blocks as a string array.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="contentstatemetadatah1h2h3h4h5h6"></a>ContentStateMetadata.h1/h2/h3/h4/h5/h6<a aria-hidden="true" tabindex="-1" class="hash-link" href="#contentstatemetadatah1h2h3h4h5h6" title="Direct link to heading">#</a></h4><p>The <code>ContentStateMetadata.h1/h2/h3/h4/h5/h6</code> exposes the textual content extracted from the heading blocks as a string array.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="contentstatemetadataimages"></a>ContentStateMetadata.images<a aria-hidden="true" tabindex="-1" class="hash-link" href="#contentstatemetadataimages" title="Direct link to heading">#</a></h4><p>The <code>ContentStateMetadata.images</code> exposes the data extracted from <code>image</code> / <code>gallery</code> / <code>giphy</code> entities.
The image data object structure is:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  width</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> integer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  height</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> integer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  thumbnail</span><span class="token operator" style="color:#393A34">?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  link</span><span class="token operator" style="color:#393A34">?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      target</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      rel</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  metadata</span><span class="token operator" style="color:#393A34">?</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      alt</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      caption</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div></div></div></div></div><p>The properties marked with <code>?</code> are optional and relevant only for some of the image entities.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="contentstatemetadatavideos"></a>ContentStateMetadata.videos<a aria-hidden="true" tabindex="-1" class="hash-link" href="#contentstatemetadatavideos" title="Direct link to heading">#</a></h4><p>The <code>ContentStateMetadata.videos</code> exposes the data extracted from <code>video</code> / <code>sound-cloud</code> / <code>youtube</code> entities.</p><p>The video data object structure is:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  width</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> integer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  height</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> integer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div></div></div></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="contentstatemetadatafiles"></a>ContentStateMetadata.files<a aria-hidden="true" tabindex="-1" class="hash-link" href="#contentstatemetadatafiles" title="Direct link to heading">#</a></h4><p>The <code>ContentStateMetadata.files</code> exposes the data extracted from <code>file-upload</code> entities.</p><p>The file object structure:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  fileType</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  url</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div></div></div></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="contentstatemetadatamaps"></a>ContentStateMetadata.maps<a aria-hidden="true" tabindex="-1" class="hash-link" href="#contentstatemetadatamaps" title="Direct link to heading">#</a></h4><p>The <code>ContentStateMetadata.maps</code> exposes the data extracted from <code>google-map</code> entities. The map data structure is similar to <code>mapSettings</code> object structure (found in the map entity data).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="contentstatebuilder"></a>ContentStateBuilder<a aria-hidden="true" tabindex="-1" class="hash-link" href="#contentstatebuilder" title="Direct link to heading">#</a></h3><p>The <code>ContentStateBuilder</code> exposes API for ContentState generation, based on the Builder design pattern.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="content-generation-methods"></a>Content generation methods<a aria-hidden="true" tabindex="-1" class="hash-link" href="#content-generation-methods" title="Direct link to heading">#</a></h4><p>The basic <code>ContentStateBuilder</code> methods allow to add content elements to the constructed ContentState. The methods named after the content type being added, e.g. is <code>image</code> method allows to add an image, and <code>plain</code> method adds plain text. The methods could be chained:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> previewState </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ContentStateBuilder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">initialState</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">image</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">imageData</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> config</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">gallery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">items</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> config</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">plain</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">text</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor" id="contentstatebuilderplaintext-config"></a>ContentStateBuilder.plain(text, config)<a aria-hidden="true" tabindex="-1" class="hash-link" href="#contentstatebuilderplaintext-config" title="Direct link to heading">#</a></h5><p>The <code>ContentStateBuilder.plain</code> method appends an <code>unstyled</code> block with given <code>text</code>. If the <code>text</code> param is a string array, then it will append block for each string. The optional <code>config</code> is merged to the block data.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor" id="contentstatebuilderultext-config"></a>ContentStateBuilder.ul(text, config)<a aria-hidden="true" tabindex="-1" class="hash-link" href="#contentstatebuilderultext-config" title="Direct link to heading">#</a></h5><p>The <code>ContentStateBuilder.ul</code> method appends an <code>unordered-list-item</code> block with given <code>text</code>. If the <code>text</code> param is a string array, then it will append block for each string. The optional <code>config</code> is merged to the block data.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor" id="contentstatebuilderoltext-config"></a>ContentStateBuilder.ol(text, config)<a aria-hidden="true" tabindex="-1" class="hash-link" href="#contentstatebuilderoltext-config" title="Direct link to heading">#</a></h5><p>The <code>ContentStateBuilder.ol</code> method appends an <code>ordered-list-item</code> block with given <code>text</code>. If the <code>text</code> param is a string array, then it will append block for each string. The optional <code>config</code> is merged to the block data.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor" id="contentstatebuildercodetext-config"></a>ContentStateBuilder.code(text, config)<a aria-hidden="true" tabindex="-1" class="hash-link" href="#contentstatebuildercodetext-config" title="Direct link to heading">#</a></h5><p>The <code>ContentStateBuilder.code</code> method appends a <code>code-block</code> block with given <code>text</code>. If the <code>text</code> param is a string array, then it will append block for each string. The optional <code>config</code> is merged to the block data.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor" id="contentstatebuilderquotetext-config"></a>ContentStateBuilder.quote(text, config)<a aria-hidden="true" tabindex="-1" class="hash-link" href="#contentstatebuilderquotetext-config" title="Direct link to heading">#</a></h5><p>The <code>ContentStateBuilder.quote</code> method appends a <code>blockquote</code> block with given <code>text</code>. If the <code>text</code> param is a string array, then it will append block for each string. The optional <code>config</code> is merged to the block data.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor" id="contentstatebuilderh1h2h3h4h5h6text-config"></a>ContentStateBuilder.h1/h2/h3/h4/h5/h6(text, config)<a aria-hidden="true" tabindex="-1" class="hash-link" href="#contentstatebuilderh1h2h3h4h5h6text-config" title="Direct link to heading">#</a></h5><p>The <code>ContentStateBuilder.h1/h2/h3/h4/h5/h6</code> methods append a header block with given <code>text</code>. If the <code>text</code> param is a string array, then it will append block for each string. The optional <code>config</code> is merged to the block data.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor" id="contentstatebuilderimage-mediainfo-config-overrides-"></a>ContentStateBuilder.image({ mediaInfo, config, overrides })<a aria-hidden="true" tabindex="-1" class="hash-link" href="#contentstatebuilderimage-mediainfo-config-overrides-" title="Direct link to heading">#</a></h5><p>The <code>ContentStateBuilder.image</code> method appends an <code>atomic</code> block to the <code>blocks</code> and a <code>wix-draft-plugin-image</code> entity to the <code>entityMap</code>. The optional params <code>config</code> and <code>overrides</code> are merged with the <code>entity.data.config</code> and <code>entity.data</code>, respectively.
The <code>mediaInfo</code> param is expected to be an image data object returned by <a href="/rich-content/docs/rcp_api/RichContentPreviewAPI#contentstatemetadataimages">ContentStateMetadata.images</a> method.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor" id="contentstatebuildergiphy-mediainfo-config-overrides-"></a>ContentStateBuilder.giphy({ mediaInfo, config, overrides })<a aria-hidden="true" tabindex="-1" class="hash-link" href="#contentstatebuildergiphy-mediainfo-config-overrides-" title="Direct link to heading">#</a></h5><p>The <code>ContentStateBuilder.giphy</code> method appends an <code>atomic</code> block to the <code>blocks</code> and a <code>wix-draft-plugin-giphy</code> entity to the <code>entityMap</code>. The optional params <code>config</code> and <code>overrides</code> are merged with the <code>entity.data.config</code> and <code>entity.data</code>, respectively.
The <code>mediaInfo</code> param is expected to be an image data object returned by <a href="/rich-content/docs/rcp_api/RichContentPreviewAPI#contentstatemetadataimages">ContentStateMetadata.images</a> method.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor" id="contentstatebuildergallery-mediainfo-config-overrides-"></a>ContentStateBuilder.gallery({ mediaInfo, config, overrides })<a aria-hidden="true" tabindex="-1" class="hash-link" href="#contentstatebuildergallery-mediainfo-config-overrides-" title="Direct link to heading">#</a></h5><p>The <code>ContentStateBuilder.gallery</code> method appends an <code>atomic</code> block to the <code>blocks</code> and a <code>wix-draft-plugin-gallery</code> entity to the <code>entityMap</code>. The optional params <code>config</code> and <code>overrides</code> are merged with the <code>entity.data.config</code> and <code>entity.data</code>, respectively.
The <code>items</code> param is expected to be an array of image data objects returned by <a href="/rich-content/docs/rcp_api/RichContentPreviewAPI#contentstatemetadataimages">ContentStateMetadata.images</a> method.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor" id="contentstatebuildervideo-mediainfo-config-overrides-"></a>ContentStateBuilder.video({ mediaInfo, config, overrides })<a aria-hidden="true" tabindex="-1" class="hash-link" href="#contentstatebuildervideo-mediainfo-config-overrides-" title="Direct link to heading">#</a></h5><p>The <code>ContentStateBuilder.video</code> method appends an <code>atomic</code> block to the <code>blocks</code> and a <code>wix-draft-plugin-video</code> entity to the <code>entityMap</code>. The optional params <code>config</code> and <code>overrides</code> are merged with the <code>entity.data.config</code> and <code>entity.data</code>, respectively.
The <code>mediaInfo</code> param is expected to be a video data object returned by <a href="/rich-content/docs/rcp_api/RichContentPreviewAPI#contentstatemetadatavideos">ContentStateMetadata.videos</a> method.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor" id="contentstatebuildersoundcloud-mediainfo-config-overrides-"></a>ContentStateBuilder.soundCloud({ mediaInfo, config, overrides })<a aria-hidden="true" tabindex="-1" class="hash-link" href="#contentstatebuildersoundcloud-mediainfo-config-overrides-" title="Direct link to heading">#</a></h5><p>The <code>ContentStateBuilder.soundCloud</code> method appends an <code>atomic</code> block to the <code>blocks</code> and a <code>wix-draft-plugin-sound-cloud</code> entity to the <code>entityMap</code>. The optional params <code>config</code> and <code>overrides</code> are merged with the <code>entity.data.config</code> and <code>entity.data</code>, respectively.
The <code>mediaInfo</code> param is expected to be a video data object returned by <a href="/rich-content/docs/rcp_api/RichContentPreviewAPI#contentstatemetadatavideos">ContentStateMetadata.videos</a> method.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor" id="contentstatebuilderfile-mediainfo-config-overrides-"></a>ContentStateBuilder.file({ mediaInfo, config, overrides })<a aria-hidden="true" tabindex="-1" class="hash-link" href="#contentstatebuilderfile-mediainfo-config-overrides-" title="Direct link to heading">#</a></h5><p>The <code>ContentStateBuilder.file</code> method appends an <code>atomic</code> block to the <code>blocks</code> and a <code>wix-draft-plugin-file-upload</code> entity to the <code>entityMap</code>. The optional params <code>config</code> and <code>overrides</code> are merged with the <code>entity.data.config</code> and <code>entity.data</code>, respectively.
The <code>mediaInfo</code> param is expected to be a file data object returned by <a href="/rich-content/docs/rcp_api/RichContentPreviewAPI#contentstatemetadatafiles">ContentStateMetadata.files</a> method.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor" id="contentstatebuildermap-mediainfo-config-overrides-"></a>ContentStateBuilder.map({ mediaInfo, config, overrides })<a aria-hidden="true" tabindex="-1" class="hash-link" href="#contentstatebuildermap-mediainfo-config-overrides-" title="Direct link to heading">#</a></h5><p>The <code>ContentStateBuilder.map</code> method appends an <code>atomic</code> block to the <code>blocks</code> and a <code>wix-draft-plugin-map</code> entity to the <code>entityMap</code>. The optional params <code>config</code> and <code>overrides</code> are merged with the <code>entity.data.config</code> and <code>entity.data</code>, respectively.
The <code>mediaInfo</code> parameter is expected to be a map data object returned by <a href="/rich-content/docs/rcp_api/RichContentPreviewAPI#contentstatemetadatamaps">ContentStateMetadata.maps</a> method.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="contentstatetransformation"></a>ContentStateTransformation<a aria-hidden="true" tabindex="-1" class="hash-link" href="#contentstatetransformation" title="Direct link to heading">#</a></h2><p>The <code>ContentStateTransformation</code> represents a rule to be applied on content state in order to achieve the desired preview state:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> transformation </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ContentStateTransformation</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> _if</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> _then</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> initialPreviewState </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> previewState </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> transformation</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">apply</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">contentState</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div><p>In the code fragment above, the <code>_if</code> and <code>_then</code> arguments are functions following the convention:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token function-variable function" style="color:#d73a49">_if</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token parameter">ContentStateMetadata</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> boolean</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function-variable function" style="color:#d73a49">_then</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">ContentStateMetadata</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> ContentStateBuilder</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token maybe-class-name">ContentStateBuilder</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div><p>The optional argument <code>initialPreviewState</code> allows to pass an initial preview state.</p><p>The following fragment demonstrates the &quot;if content images &gt; 3 =&gt; add a gallery with 3 items&quot; rule definition:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> transformation </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ContentStateTransformation</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function-variable function" style="color:#d73a49">_if</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token parameter">metadata</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">images</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function-variable function" style="color:#d73a49">_then</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">metadata</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> preview</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    preview</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">gallery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      mediaInfo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">images</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">slice</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> preview </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> transformation</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">apply</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">contentState</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div><p>The <code>rule</code> method allows to chain multiple rules. They will be applied one after another:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> transformation </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ContentStateTransformation</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> _if</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token spread operator" style="color:#393A34">...</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> _then</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">rule</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> _if</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token spread operator" style="color:#393A34">...</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> _then</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">rule</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> _if</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token spread operator" style="color:#393A34">...</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> _then</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="content-interactions"></a>Content Interactions<a aria-hidden="true" tabindex="-1" class="hash-link" href="#content-interactions" title="Direct link to heading">#</a></h3><p>The content interaction indicate that the preview content is collapsed, and provide a way to expand it. Content interactions work at the block level. Every interaction consists of the following elements:</p><ul><li><p><em>ContentStateBuilder API</em> allows a consumer to add an interaction to the preview state and configure it. These APIs can be chained just like any other ContentStateBuilder method:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  builder</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">plain</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;some looong text&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">readMore</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> lines</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">image</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> mediaInfo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token spread operator" style="color:#393A34">...</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div></div></div></div></div><p>In this example, the <code>readMore</code> interaction is being applied to the previous <code>plain</code> block.</p></li><li><p><em>block data interactions array</em> contains configuration data for all the interactions applied to the block</p></li><li><p><em>UI component</em> defines the appearance of the interaction element</p></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="predefined-interactions"></a>Predefined Interactions<a aria-hidden="true" tabindex="-1" class="hash-link" href="#predefined-interactions" title="Direct link to heading">#</a></h4><h5><a aria-hidden="true" tabindex="-1" class="anchor" id="readmore"></a>ReadMore<a aria-hidden="true" tabindex="-1" class="hash-link" href="#readmore" title="Direct link to heading">#</a></h5><p>The <code>ReadMore</code> component comes to display a portion of a long text, appending it an ellipsis symbol (<code>â€¦</code>) and label (by default, those are &#x27;â€¦ read more&#x27;).
The ContentStateBuilder exposes <code>readMore</code> API that accepts configuration object:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    lines</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> number</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    label</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function-variable function" style="color:#d73a49">onClick</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    text</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span></div></div></div></div></div><p>The <code>text</code> field allows to specify the text to be displayed. By default, the text is taken from the wrapped children.
The <code>onClick</code> field is common for all the interactions. It defines the ineraction click behavior, by intercepting the expansion click.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor" id="seefullpost"></a>SeeFullPost<a aria-hidden="true" tabindex="-1" class="hash-link" href="#seefullpost" title="Direct link to heading">#</a></h5><p>The <code>SeeFullPost</code> interaction adds an overlay containing a link-like label (by default, it says <code>See Full Post</code>). The click on label expands the full content. The settings object:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    label</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    overlayStyle</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> object</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    labelStyle</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> object</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function-variable function" style="color:#d73a49">onClick</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div></div></div></div></div><p>The <code>ContentStateBuilder</code> exposes <code>seeFullPost</code> method that applies the interaction on the previous block data.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor" id="imagecounter"></a>ImageCounter<a aria-hidden="true" tabindex="-1" class="hash-link" href="#imagecounter" title="Direct link to heading">#</a></h5><p>The <code>ImageCounter</code> serves as a counter of media entities in collapsed content. The configuration object structure:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    counter</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> number</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function-variable function" style="color:#d73a49">formatLabel</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token parameter">number</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    imageSelector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token known-class-name class-name">Array</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">image</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token known-class-name class-name">Array</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">image</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    style</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> object</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function-variable function" style="color:#d73a49">onClick</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div></div></div></div></div><p>The <code>counter</code> field is self-explanatory, the <code>formatLabel</code> defines the format of the label. The default implementation is:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token parameter">counter</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">+ </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation"> counter </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div></div></div></div></div><p>The <code>imageSelector</code> function selects images that should be decorated by the counter label, among the images found within <code>ImageCounter</code> children. By default, last image is selected.</p><p>The <code>ContentStateBuilder</code> exposes <code>imageCounter</code> method that applies the interaction on previous block data.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="richcontentviewer-integration"></a>RichContentViewer Integration<a aria-hidden="true" tabindex="-1" class="hash-link" href="#richcontentviewer-integration" title="Direct link to heading">#</a></h4><p>RichContentViewer <code>config</code> prop now allows to pass the preview related configuration, by adding the following entry:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token constant" style="color:#36acaa">PREVIEW</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      contentInteractionMappers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token maybe-class-name">Component</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function-variable function" style="color:#d73a49">onPreviewExpand</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div></div></div></div></div><p>The <code>contentInteractionMappers</code> field allows to pass the interactions as a function array, similar to the <code>typeMappers</code> and <code>inlineStyleMappers</code>. The <code>preview</code> package exports the <code>interactionMap</code> API containing three predefined interactions mentioned in previous section.</p><p>The <code>onPreviewExpand</code> handler determines the behavior on content expansion. The <code>RichContentPreview</code> component wraps the <code>RichContentViewer</code> while providing the default <code>PREVIEW</code> configuration, interacton map, and default transformation rule:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-js codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> defaultTransformation </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ContentStateTransformation</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function-variable function" style="color:#d73a49">_if</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token parameter">metadata</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">plain</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function-variable function" style="color:#d73a49">_then</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">metadata</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> preview</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    preview</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">plain</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">plain</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">readMore</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> lines</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">rule</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function-variable function" style="color:#d73a49">_if</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token parameter">metadata</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">images</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">images</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function-variable function" style="color:#d73a49">_then</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">metadata</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> preview</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      preview</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">image</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> mediaInfo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">images</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">seeFullPost</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">rule</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function-variable function" style="color:#d73a49">_if</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token parameter">metadata</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">images</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function-variable function" style="color:#d73a49">_then</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">metadata</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> preview</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      preview</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">gallery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          mediaInfo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">images</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">slice</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          overrides</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            styles</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">              galleryLayout</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">imageCounter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> counter</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">images</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></div></div></div></div></div><p>The default rule displays 3 lines of plain text, and a single image appended by &#x27;See Full Post&#x27; label, if the ContentState contains less than 5 images; otherwise, it displays a gallery grid of 4 images with image counter.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="custom-interactions"></a>Custom Interactions<a aria-hidden="true" tabindex="-1" class="hash-link" href="#custom-interactions" title="Direct link to heading">#</a></h4><p>TBD</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/rich-content/docs/rcv_api/addAnchors"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Anchors</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link">Introduction</a></li><li><a href="#architecture" class="table-of-contents__link">Architecture</a><ul><li><a href="#content-state-analyzer" class="table-of-contents__link">Content State Analyzer</a></li><li><a href="#content-state-builder" class="table-of-contents__link">Content State Builder</a></li><li><a href="#rule-engine" class="table-of-contents__link">Rule Engine</a></li><li><a href="#preview-interactions" class="table-of-contents__link">Preview Interactions</a></li></ul></li><li><a href="#apis" class="table-of-contents__link">APIs</a><ul><li><a href="#getcontentstatemetadata" class="table-of-contents__link">getContentStateMetadata</a></li><li><a href="#contentstatebuilder" class="table-of-contents__link">ContentStateBuilder</a></li></ul></li><li><a href="#contentstatetransformation" class="table-of-contents__link">ContentStateTransformation</a><ul><li><a href="#content-interactions" class="table-of-contents__link">Content Interactions</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Learn</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/rich-content/docs/ricos/ricos-intro">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/rich-content/docs/ricos/quick-start">Quick Start</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://wix.slack.com/archives/C8QHV6UM9" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack</a></li><li class="footer__item"><a href="https://app.asana.com/0/1160368252184537/board" target="_blank" rel="noopener noreferrer" class="footer__link-item">Asana</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/wix-incubator/rich-content" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://github.com/wix-incubator/rich-content/blob/master/CHANGELOG.md" target="_blank" rel="noopener noreferrer" class="footer__link-item">Changelog</a></li></ul></div></div><div class="text--center"><div>Copyright Â© 2020 Wix</div></div></div></footer></div>
<script src="/rich-content/styles.ae93a173.js"></script>
<script src="/rich-content/runtime~main.35869582.js"></script>
<script src="/rich-content/main.1b9019dc.js"></script>
<script src="/rich-content/5.faeed656.js"></script>
<script src="/rich-content/7.cae4dac7.js"></script>
<script src="/rich-content/80.92db8b89.js"></script>
<script src="/rich-content/82.498dd18d.js"></script>
<script src="/rich-content/935f2afb.da9c5928.js"></script>
<script src="/rich-content/17896441.2946f2e6.js"></script>
<script src="/rich-content/3c41c506.bfb3648c.js"></script>
</body>
</html>